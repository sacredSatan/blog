<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>Sneaky bugs: using lodash/trimStart to trim off a leading substring</title><link rel=stylesheet href=/blog/css/style.css></head><body><header><div class=header-title-wrapper><div class=header-title><a class=header-link href=https://sacredsatan.com/blog>sacredSatan/blog</a><div class=header-subtitle>slash blog... slAsH bLOg... SLASH BLOG.</div></div><nav><a href=/blog/posts/><b>Posts</b></a>.
<a href=/blog/tags/><b>Tags</b></a>.
<a href=/blog/categories/><b>Categories</b></a>.</nav></div></header><main><article><h1>Sneaky bugs: using lodash/trimStart to trim off a leading substring</h1><b><time>28.11.2021 16:07</time></b>
<a href=/blog/tags/javascript>javascript</a>
<a href=/blog/tags/bugs>bugs</a>
<a href=/blog/tags/lodash>lodash</a><div><p>Sneaky bugs are bugs that escape your first glance through the code. I&rsquo;ve had this recently happen to me with <code>lodash/trimStart</code>.</p><p><code>trimStart</code> removes leading whitespace or passed in characters until it hits a character that isn&rsquo;t one of the characters to trim. In this case it was used to remove a substring from the beginning of the input string.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#a6e22e>trimStart</span>(<span style=color:#e6db74>&#39;Mr. Mario&#39;</span>, <span style=color:#e6db74>&#39;Mr. &#39;</span>) <span style=color:#75715e>// expected: &#39;Mario&#39;, actual: &#39;ario&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>trimStart</span>(<span style=color:#e6db74>&#39;+919999999999&#39;</span>, <span style=color:#e6db74>&#39;+91&#39;</span>) <span style=color:#75715e>// expected: &#39;9999999999&#39;, actual: &#39;&#39;
</span></span></span></code></pre></div><p>You&rsquo;re better off using <code>replace</code> with <code>startsWith</code> to do the job.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>inputStr</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Mr. Mario&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>subStr</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Mr. &#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>startsWith</span>(<span style=color:#a6e22e>inputStr</span>, <span style=color:#a6e22e>subStr</span>) <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>replace</span>(<span style=color:#a6e22e>inputStr</span>, <span style=color:#a6e22e>subStr</span>, <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#75715e>// expected: &#39;Mario&#39;, actual: &#39;Mario&#39;
</span></span></span></code></pre></div><p>This wouldn&rsquo;t necessarily happen to someone who&rsquo;s familiar with <code>lodash/trimStart</code> but it certainly sneaked past me.</p></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/blog/posts/2023-10-21-sneaky-bugs-string-substitution-and-string-split/>Sneaky Bugs: string substitution and string split</a></li><li><a href=/blog/posts/2023-10-21-diwali-cleaning-blog-post-ideas-dump/>Diwali Cleaning: blog post ideas dump</a></li><li><a href=/blog/posts/2023-01-01-odd-api-design-debounced-loadoptions-react-select/>Odd Api Design: loadOptions prop in async React Select</a></li><li><a href=/blog/posts/2022-08-15-sneaky-bugs-string-startswith-indexof/>Sneaky bugs: startsWith and indexOf with empty string</a></li><li><a href=/blog/posts/2021-11-28-sneaky-bugs-lodash-trimstart-substring/>Sneaky bugs: using lodash/trimStart to trim off a leading substring</a></li></ul></div></div></aside><footer><p>&copy; 2023.
<a href=https://sacredsatan.com/><b>/</b></a>.
<a href=https://sacredsatan.com/blog><b>/blog</b></a>.
<a href=https://github.com/sacredsatan><b>Github</b></a>.</p></footer></body></html>